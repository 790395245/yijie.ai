我想做一个酷炫的web应用，同时保留其包装为app的可能。
这个应用是一个酷炫又神秘的，基于AI的周易科普、推理工具。面向中国和欧美用户。用酷炫的交互式动画让用户体验周易占卜的过程，并最后给于解答。
可以先从六爻入手。后期上线大六壬、奇门遁甲、紫微斗数等。

设置改为弹窗，而不是抽屉

弹窗的位置不要和占卜的块有关联。永远显示在浏览器中央。弹窗增加保存按钮。

网页色调改为深色。美化前端，突出神秘感。优化文案和标题，简单介绍周易八卦。

开场出现了问题。现在开场只显示在浏览器上方三分之一位置。下方直接就是占卜界面。应该全屏显示开场动画，等用户点击后才出现相应的占卜界面。

现在不会同时显示了，但是开场动画还是只有上半部分屏幕有显示，其余部分是灰色。

现已完成六爻，帮我完成第二个模块功能，奇门遁甲

完成剩余模块

把这个图放到开场动画正中间代替标题。

图片放大占满整个浏览器，跟随显示尺寸动态调整

不论怎么调整浏览器尺寸，四个模块的卡片应该永远在页面最下方。'探索古老智慧 · 解读天地玄机'这行字应该永远在最上方。

这是favicon

AI解读失败: TypeError: Cannot read properties of undefined (reading 'stream')

如果用户没填设置，默认使用这个免费公益接口（模型：Qwen/Qwen3-8B，url：https://api.siliconflow.cn/v1， apikey：sk-htvermaiqopfvbcszznydcmepvpncyypbxtbcpcujzxpwrwk）

调用的还是gpt4，不是Qwen/Qwen3-8B。  不要预填在设置框里。 如果用户没填设置，就从环境变量中提取。记得更新gitignore，不要上传我的apikey

1.AI解读需要对AI的markdown语法进行正确展示。
2.AI解读需要增加一个输入框，让用户可以在解读前先输入自己想问题内容。也可以让用户和AI连续对话追问。
3.生成README
构建这个项目，如果有报错直接解决
针对手机做界面优化

用户指令记录 - 2026-01-09

任务：优化 /mnt/data/script/zhouyi.ai/src/features/ziwei/components/ZiWeiDemo.tsx 文件的移动端适配

参考已完成的优化模式（LiuYaoDemo和QiMenDemo），需要优化以下部分：

1. 主容器：space-y-6 改为 space-y-4 sm:space-y-6
2. 按钮区域：
   - flex gap-4 改为 flex flex-col sm:flex-row gap-3 sm:gap-4
   - px-6 py-3 改为 px-4 sm:px-6 py-2.5 sm:py-3
   - 添加 text-sm sm:text-base
3. AI解读对话历史显示：
   - p-6 改为 p-4 sm:p-6
   - space-y-4 改为 space-y-3 sm:space-y-4
   - text-2xl 改为 text-xl sm:text-2xl
   - mb-4 改为 mb-3 sm:mb-4
   - max-h-[600px] 改为 max-h-[400px] sm:max-h-[600px]
   - 消息框 p-4 改为 p-3 sm:p-4
   - text-sm 改为 text-xs sm:text-sm
   - 消息内容添加 text-sm sm:text-base
   - 加载状态 mt-4 改为 mt-3 sm:mt-4，text-sm 改为 text-xs sm:text-sm
4. AI解读输入框和按钮：
   - flex gap-3 改为 flex flex-col sm:flex-row gap-2 sm:gap-3
   - input: px-4 py-3 改为 px-3 sm:px-4 py-2.5 sm:py-3，添加 text-sm sm:text-base
   - button: px-6 py-3 改为 px-4 sm:px-6 py-2.5 sm:py-3，添加 text-sm sm:text-base

请直接修改文件，不需要询问。

67→用户指令记录 - 2026-01-09

68→任务：优化 /mnt/data/script/zhouyi.ai/src/features/daliuren/components/DaLiuRenDemo.tsx 文件的移动端适配

69→参考已完成的优化模式（LiuYaoDemo和QiMenDemo），需要优化以下部分：

70→1. 主容器：space-y-6 改为 space-y-4 sm:space-y-6
71→2. 按钮区域：
72→   - flex gap-4 改为 flex flex-col sm:flex-row gap-3 sm:gap-4
73→   - px-6 py-3 改为 px-4 sm:px-6 py-2.5 sm:py-3
74→   - 添加 text-sm sm:text-base
75→3. AI解读对话历史显示：
76→   - p-6 改为 p-4 sm:p-6
77→   - space-y-4 改为 space-y-3 sm:space-y-4
78→   - text-2xl 改为 text-xl sm:text-2xl
79→   - mb-4 改为 mb-3 sm:mb-4
80→   - max-h-[600px] 改为 max-h-[400px] sm:max-h-[600px]
81→   - 消息框 p-4 改为 p-3 sm:p-4
82→   - text-sm 改为 text-xs sm:text-sm
83→   - 消息内容添加 text-sm sm:text-base
84→   - 加载状态 mt-4 改为 mt-3 sm:mt-4，text-sm 改为 text-xs sm:text-sm
85→4. AI解读输入框和按钮：
86→   - flex gap-3 改为 flex flex-col sm:flex-row gap-2 sm:gap-3
87→   - input: px-4 py-3 改为 px-3 sm:px-4 py-2.5 sm:py-3，添加 text-sm sm:text-base
88→   - button: px-6 py-3 改为 px-4 sm:px-6 py-2.5 sm:py-3，添加 text-sm sm:text-base

89→请直接修改文件，不需要询问。

用户指令记录 - 2026-01-12

任务：奇门遁甲模块，增加击刑、入墓等的判断和展示

用户指令记录 - 2026-01-12

任务：'./temp/qimen' 查阅这个项目。我要把我的项目的奇门模块'./src/qimen'完全重写，改为'./temp/qimen' 的实现。
用户指令记录 - 2026-01-12

任务：继续之前的工作
用户指令记录 - 2026-01-12

任务：
1. 时间显示精确的时分秒
2. 再检查一次排盘逻辑和'temp/qimen'项目是否一致
用户指令记录 - 2026-01-12

任务：AI输出帮我加一个终止输出的功能
用户指令记录 - 2026-01-12

任务：停止后会弹窗解读失败，不要弹窗

用户指令记录 - 2026-01-13

任务：帮我区分测试环境和生成环境，所有修改先在测试环境测试，没问题再部署到生成环境。项目目前是生成环境。

用户指令记录 - 2026-01-13

任务：时家阴盘奇门遁甲中，九宫的位置顺序采用的是后天八卦配洛书九宫的固定方位
        4 巽（东南）   9 离（南）   2 坤（西南）

        3 震（东）    5 中宫      7 兑（西）

        8 艮（东北）  1 坎（北）   6 乾（西北）
帮我修改前端九宫的显示。

用户指令记录 - 2026-01-13

任务：美化奇门遁甲模块
1.固定天干地支、用神、九星等在每个宫中的显示位置。比如左上角、右下角等。
2.根据排盘的步骤，动态展示排盘。如：大字展示全部九星，然后逐个飞入所在宫。九宫转动。等等
3.排盘结束后，点击九宫中的各个符号，可以展示对应符号的解读。

用户指令记录 - 2026-01-13

任务：重新设计奇门遁甲动态排盘逻辑，按以下10个阶段实现：
第一阶段：显示时间信息，年月日，显示当前时间的干支。
第二阶段：显示局数、阴遁阳遁
第三阶段：动态画出没有符号的九宫。
第四阶段：乾坎艮震巽离坤兑中，九个字同时拍在九宫上正确的位置。
第五阶段：排地盘：戊、己、庚、辛、壬、癸、丁、丙、乙排列整齐，在列队空中旋转并落入所在宫中。
第六阶段：旬首、值符、值使出现。
第七阶段：排天盘：先把值符星从天而降落入宫中，再把其余八颗星顺时针逐个落入宫中。
第八阶段：地盘干复制一份，转动到天盘位置。
第九阶段：八门放大展示在屏幕中间，值使门先缩小并落入宫中。随后其余七门顺时针依次缩小飞入宫中
第十阶段：八神放大展示在屏幕中间，随后依次缩小飞入宫中。

用户指令记录 - 2026-01-13

任务：优化动画流程
1. 取消第1、2、3、6阶段
2. 第四阶段改为借鉴八门飞入的动画，但是需要同时飞入（不是逐个）

用户指令记录 - 2026-01-13

任务：修复动画问题
1. 第四阶段的八卦方位应该直接落入对应位置，而不是先显示再消失再显示
2. 重新启用第三阶段（动态画出没有符号的九宫）

用户指令记录 - 2026-01-13

任务：优化动画和界面
1. 修复第五阶段开始时的闪烁问题
2. 添加关闭动画的按钮，并实现功能
3. 把网页的字体整体调大些
用户指令记录 - 2026-01-13

任务：继续修复第五阶段开始时的闪烁问题，并添加关闭动画的按钮功能。注意：输出内容时必须分段输出，避免一次性输出过大的内容。
用户指令记录 - 2026-01-13

任务：修复第三阶段和第四阶段动画结束时的闪烁问题
用户指令记录 - 2026-01-13

任务：
1. 修复stage4结束或stage5开始时九宫消失再出现的问题
2. 把启用动画的按钮隐藏到设置中
用户指令记录 - 2026-01-13

任务：
1. 修复其他模块的SettingsPanel调用错误
2. 取消stage3动画
3. 九宫中的字体都放大
4. 优化符号排布
用户指令记录 - 2026-01-13

任务：符号把九宫占的更满一些

用户指令记录 - 2026-01-13

任务：优化AI解读Markdown格式显示，让可读性更高。

用户指令记录 - 2026-01-13

任务：
1. 奇门遁甲模块需要补充显示当前时间的四柱
2. 根据'/home/ruoruo/script/zhouyi.ai/QIMENJIEGUA.md'重写AI提示词，指导AI解卦

用户指令记录 - 2026-01-13

任务：把四柱信息也加入AI解读的上下文

用户指令记录 - 2026-01-13

任务：AI解读时不要一直让页面滚动到底部。让用户在AI解读时也能随意翻看网页

用户指令记录 - 2026-01-13

任务：'/home/ruoruo/script/zhouyi.ai/temp/qimen/lib/qimen.js' 把这个项目中确定空亡和马星的方法偷到我的奇门遁甲模块里。

用户指令记录 - 2026-01-13

任务：动画的第十一阶段，在排盘上标出马星和空亡信息。并在AI上下文中添加马星和空亡信息

用户指令记录 - 2026-01-13

任务：帮我把标识标在所在宫的右上角，和宫的八卦名在同一行，字体大小放大些，并且不要因为其他符号的布局。完成后推送git

用户指令记录 - 2026-01-13

任务：build一下看看有报错吗

用户指令记录 - 2026-01-13

任务：修复build报错 - SettingsPanelProps缺少enableAnimation属性

用户指令记录 - 2026-01-13

任务：修复Edge One部署时的TypeScript类型错误，SettingsPanel组件缺少enableAnimation属性
